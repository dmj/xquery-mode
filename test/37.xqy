if (empty($source-node/element()/*))
then json:object()
     =>map:with('$type', 'Customer')
     =>map:with('$ref', $source-node/Customer/text())
     =>map:with('$attachments', $source-node)
else json:object()
     =>map:with('$type', 'Customer')
     =>map:with('$attachments', $source-node)
     =>map:with('CustomerID',  xs:string($source-node/Customer/@CustomerID))
     =>es:optional('CompanyName', xs:string($source-node/Customer/CompanyName))
     =>es:optional('Country',     xs:string($source-node/Customer/Country))
     =>es:optional('ContactName', xs:string($source-node/Customer/ContactName))
     =>es:optional('Phone',       xs:string($source-node/Customer/Phone))
